```c++
#include<stdio.h>
#include<iostream>
#include<string>
#include<stack>
using namespace std;


int main() {
	stack<char> stk_left;
	stack<char> stk_right;
	string s;
	int M;

	cin >> s;
	cin >> M;
	for (char ch : s)
		stk_left.push(ch);

	while (M--) {
		string order;
		cin >> order;
		if (order == "L") {
			if (stk_left.empty())
				continue;
			stk_right.push(stk_left.top());
			stk_left.pop();
		}
		else if (order == "D") {
			if (stk_right.empty())
				continue;
			stk_left.push(stk_right.top());
			stk_right.pop();
		}
		else if (order == "B") {
			if (stk_left.empty())
				continue;
			stk_left.pop();
		}
		else if (order == "P") {
			char c;
			cin >> c;
			stk_left.push(c);
		}
	}

	while (!stk_left.empty()) {
		stk_right.push(stk_left.top());
		stk_left.pop();
	}
	while (!stk_right.empty()) {
		cout << stk_right.top();
		stk_right.pop();
	}
	cout << '\n';

	return 0;
}
```
