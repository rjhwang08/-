```c++
// 내 정답
#include<stdio.h>
#include<iostream>
#include<string>
#include<stack>
using namespace std;


int main() {
	stack<char> stk_left;
	stack<char> stk_right;
	string s;
	int M;

	cin >> s;
	cin >> M;
	for (char ch : s)
		stk_left.push(ch);

	while (M--) {
		string order;
		cin >> order;
		if (order == "L") {
			if (stk_left.empty())
				continue;
			stk_right.push(stk_left.top());
			stk_left.pop();
		}
		else if (order == "D") {
			if (stk_right.empty())
				continue;
			stk_left.push(stk_right.top());
			stk_right.pop();
		}
		else if (order == "B") {
			if (stk_left.empty())
				continue;
			stk_left.pop();
		}
		else if (order == "P") {
			char c;
			cin >> c;
			stk_left.push(c);
		}
	}

	while (!stk_left.empty()) {
		stk_right.push(stk_left.top());
		stk_left.pop();
	}
	while (!stk_right.empty()) {
		cout << stk_right.top();
		stk_right.pop();
	}
	cout << '\n';

	return 0;
}
```

```c++
// BOJ c++
#include <cstdio>
#include <cstring>
#include <stack>
using namespace std;
char a[600000];
int main() {
    scanf("%s",a);
    stack<char> left, right;
    int n = strlen(a);
    for (int i=0; i<n; i++) {
        left.push(a[i]);
    }
    int m;
    scanf("%d",&m);
    while (m--) {
        char what;
        scanf(" %c",&what);
        if (what == 'L') {
            if (!left.empty()) {
                right.push(left.top());
                left.pop();
            }
        } else if (what == 'D') {
            if (!right.empty()) {
                left.push(right.top());
                right.pop();
            }
        } else if (what == 'B') {
            if (!left.empty()) {
                left.pop();
            }
        } else if (what == 'P') {
            char c;
            scanf(" %c",&c);
            left.push(c);
        }
    }
    while (!left.empty()) {
        right.push(left.top());
        left.pop();
    }
    while (!right.empty()) {
        printf("%c",right.top());
        right.pop();
    }
    printf("\n");
    return 0;
}
```

```java
// BOJ java
import java.util.*;
import java.io.*;
public class Main {
    public static void main(String args[]) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String s = br.readLine();
        Stack<Character> left = new Stack<Character>();
        Stack<Character> right = new Stack<Character>();
        for (int i=0; i<s.length(); i++) {
            left.push(s.charAt(i));
        }
        int m = Integer.parseInt(br.readLine());
        while (m-- > 0) {
            String[] line = br.readLine().split(" ");
            char what = line[0].charAt(0);
            if (what == 'L') {
                if (!left.empty()) {
                    right.push(left.pop());
                }
            } else if (what == 'D') {
                if (!right.empty()) {
                    left.push(right.pop());
                }
            } else if (what == 'P') {
                char c = line[1].charAt(0);
                left.push(c);
            } else if (what == 'B') {
                if (!left.empty()) {
                    left.pop();
                }
            }
        }
        while (!left.empty()) {
            right.push(left.pop());
        }
        StringBuilder sb = new StringBuilder();
        while (!right.empty()) {
            sb.append(right.pop());
        }
        System.out.println(sb);
    }
}
```
